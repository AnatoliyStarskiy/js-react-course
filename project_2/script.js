/* Задание на урок:

1) Автоматизировать вопросы пользователю про фильмы при помощи цикла

2) Сделать так, чтобы пользователь не мог оставить ответ в виде пустой строки,
отменить ответ или ввести название фильма длинее, чем 50 символов. Если это происходит - 
возвращаем пользователя к вопросам опять

3) При помощи условий проверить  personalMovieDB.count, и если он меньше 10 - вывести сообщение
"Просмотрено довольно мало фильмов", если от 10 до 30 - "Вы классический зритель", а если больше - 
"Вы киноман". А если не подошло ни к одному варианту - "Произошла ошибка"

4) Потренироваться и переписать цикл еще двумя способами*/

"use strict";

const numberOfFilm = +prompt("Сколько фильмов вы уже посмотрели?", "");

const personalMovieDB = {
    count: numberOfFilm,
    movies: {},
    actors: {},
    genres: [],
    privat: false,
};

/* for (let i = 0; i < 2; i++) {
    // Цикл для двух вопросов

    const a = prompt("Один из последних просмотренных фильмов?", ""); // Вопрос о названии фильма

    if (a === "" || a === false || a.length > 50) {
        // Проверка на пустую строку, отмену и длину строки
        console.log("Ошибка ввода данных. Пожалуйста, попробуйте еще раз.");
        --i; // Уменьшаем счетчик, чтобы повторить итерацию
        continue; // Переходим к следующей итерации цикла
    }

    const b = prompt("На сколько оцените его?", ""); // Вопрос об оценке фильма

    if (b === "" || b === false || b.length > 10) {
        // Проверка на пустую строку, отмену и длину строки
        console.log("Ошибка ввода данных. Пожалуйста, попробуйте еще раз.");
        --i; // Уменьшаем счетчик, чтобы повторить итерацию
        continue; // Переходим к следующей итерации цикла
    }

    personalMovieDB.movies[a] = b; // Запись ответа в объект
} */

/* for (let i = 0; i < 2; ) {
    const rawTitle = prompt("Один из последних просмотренных фильмов?", "");
    if (rawTitle === null) {
        // Cancel
        console.log("Отменено пользователем");
        continue; // не увеличиваем i
    }
    const title = rawTitle.trim();
    if (title.length === 0 || title.length > 50) {
        console.log("Некорректное название (пусто или > 50 символов).");
        continue;
    }

    const rawRate = prompt("На сколько оцените его? (0–10)", "");
    if (rawRate === null) {
        console.log("Отменено пользователем");
        continue;
    }
    const rate = Number(rawRate.replace(",", "."));
    if (!Number.isFinite(rate) || rate < 0 || rate > 10) {
        console.log("Оценка должна быть числом от 0 до 10.");
        continue;
    }

    personalMovieDB.movies[title] = rate;
    console.log("done");
    i++; // увеличиваем счётчик только при успешной записи
} */

for (let i = 0; i < 2; i++) {
    // Цикл для двух вопросов

    const a = prompt("Один из последних просмотренных фильмов?", ""); // Вопрос о названии фильма
    const b = prompt("На сколько оцените его?", ""); // Вопрос об оценке фильма

    if (a != null && b != null && a != "" && b != "" && a.length < 50) { // Проверка на пустую строку, отмену и длину строки
        personalMovieDB.movies[a] = b; // Запись ответа в объект
        console.log("done"); // Успешное выполнение
    } else {
        console.log("error"); // Ошибка ввода
        i--; // Уменьшаем счетчик, чтобы повторить итерацию
    }
}

if (personalMovieDB.count <= 10) {
    alert("Просмотрено довольно мало фильмов");
} else if (personalMovieDB.count > 10 && personalMovieDB.count <= 30) {
    alert("Вы классический зритель");
} else if (personalMovieDB.count > 30) {
    alert("Вы киноман");
} else {
    alert("Произошла ошибка");
}

console.log(personalMovieDB);
